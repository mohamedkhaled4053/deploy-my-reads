(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{16:function(e,t,o){},17:function(e,t,o){},19:function(e,t,o){"use strict";o.r(t);var s=o(0),c=o(10),n=o.n(c),a=(o(16),o(4)),r=(o(17),o(2)),i=o(8),l="https://reactnd-books-api.udacity.com",j=localStorage.token;j||(j=localStorage.token=Math.random().toString(36).substr(-8));var d={Accept:"application/json",Authorization:j},b=o(5),h=o(11),u=o(1);function O(e){var t=e.book,o=e.myBooks,s=e.setMyBooks;return o.forEach((function(e){e.id===t.id&&(t.shelf=e.shelf)})),Object(u.jsx)("li",{children:Object(u.jsxs)("div",{className:"book",children:[Object(u.jsxs)("div",{className:"book-top",children:[Object(u.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks?t.imageLinks.thumbnail:"",")")}}),Object(u.jsx)("div",{className:"book-shelf-changer",children:Object(u.jsxs)("select",{onChange:function(e){var c=e.target.value,n=o.filter((function(e){return e.id!==t.id}));t.shelf=c,n=[].concat(Object(h.a)(n),[t]),s(n),function(e,t){fetch("".concat(l,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},d),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(t,c)},value:t.shelf||"none",children:[Object(u.jsx)("option",{disabled:!0,children:t.shelf?"Move to...":"Add to..."}),Object(u.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(u.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(u.jsx)("option",{value:"read",children:"Read"}),Object(u.jsx)("option",{value:"none",children:"None"})]})})]}),Object(u.jsx)("div",{className:"book-title",children:t.title}),Object(u.jsx)("div",{className:"book-authors",children:t.authors?t.authors.join(", "):"no authors found"})]})})}function f(e){var t=e.myBooks,o=e.setMyBooks,c=Object(s.useState)([]),n=Object(a.a)(c,2),r=n[0],j=n[1],h=Object(s.useState)(""),f=Object(a.a)(h,2),k=f[0],m=f[1];return Object(s.useEffect)((function(){var e=!0;return k?function(e,t){return fetch("".concat(l,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},d),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(k,20).then((function(t){e&&(t.error?j([]):j(t))})):j([]),function(){e=!1}}),[k]),Object(u.jsxs)("div",{className:"search-books",children:[Object(u.jsxs)("div",{className:"search-books-bar",children:[Object(u.jsx)(b.b,{to:"/deploy-my-reads",className:"close-search",children:"Close"}),Object(u.jsx)("div",{className:"search-books-input-wrapper",children:Object(u.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",onChange:function(e){m(e.target.value)}})})]}),Object(u.jsx)("div",{className:"search-books-results",children:Object(u.jsx)("ol",{className:"books-grid",children:0!==r.length?r.map((function(e){return Object(u.jsx)(O,{book:e,myBooks:t,setMyBooks:o},e.id)})):"no books found"})})]})}function k(e){var t=e.name,o=e.myBooks,s=e.setMyBooks,c=o.filter((function(e){return e.shelf===t}));return Object(u.jsxs)("div",{className:"bookshelf",children:[Object(u.jsx)("h2",{style:{textTransform:"capitalize"},className:"bookshelf-title",children:t.replace(/([A-Z])/g," $1")}),Object(u.jsx)("div",{className:"bookshelf-books",children:Object(u.jsx)("ol",{className:"books-grid",children:c.map((function(e){return Object(u.jsx)(O,{book:e,myBooks:o,setMyBooks:s},e.id)}))})})]})}function m(e){var t=e.myBooks,o=e.setMyBooks;return Object(u.jsxs)("div",{className:"list-books",children:[Object(u.jsx)("div",{className:"list-books-title",children:Object(u.jsx)("h1",{children:"MyReads"})}),Object(u.jsx)("div",{className:"list-books-content",children:Object(u.jsx)("div",{children:["currentlyReading","wantToRead","read"].map((function(e){return Object(u.jsx)(k,{name:e,myBooks:t,setMyBooks:o},e)}))})}),Object(u.jsx)("div",{className:"open-search",children:Object(u.jsx)(b.b,{to:"/search",children:"Add a book"})})]})}var x=function(){var e=Object(s.useState)([]),t=Object(a.a)(e,2),o=t[0],c=t[1];return Object(s.useEffect)((function(){fetch("".concat(l,"/books"),{headers:d}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){return c(e)}))}),[]),Object(u.jsx)("div",{className:"app",children:Object(u.jsxs)(r.c,{children:[Object(u.jsx)(r.a,{path:"/deploy-my-reads",element:Object(u.jsx)(m,{myBooks:o,setMyBooks:c})}),Object(u.jsx)(r.a,{path:"/search",element:Object(u.jsx)(f,{myBooks:o,setMyBooks:c})})]})})};n.a.render(Object(u.jsx)(b.a,{children:Object(u.jsx)(x,{})}),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.cf7a6765.chunk.js.map